<div id="image_fields_container">
  <div class="image_fields">
    <%= direct_upload_form_for @uploader do |f| %>
      <span id="input_button">
        <%= f.file_field :image, id: "picture" %>
        <%= f.submit "Click to upload a picture", class: "btn btn-primary", id: "upload_button" %>
      </span>
      <span><%= f.text_field :remote_image_url, class: "form-control", placeholder: "or an image URL" %></span>
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <% end %>
  </div>
</div>

<!-- Displays chosen file name in button -->
<script>
  $('#picture').change(function(e) {
    var filepath = this.value;
    var m = filepath.match(/([^\/\\]+)$/);
    var filename = m[1];
    $('#upload_button').html(' -> ' + filename);
  });
</script>